<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>
        Rodriguez Final Project
    </title>

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script>
    
    function showResult(result)
        {
            //append the task to the TODO list
            $("#results").append("<td>" + result + "</td>");
        }

    function logResults(response)
        {
            console.log("Show all the results: " + response);
            for(var i in response)
            {
                showResult(response[i]["zipCode"]);
            }

        }

        function loadResults()
    {
        console.log("Load the results via ajax");

        //make the ajax request
        $.ajax({
            url: "https://cors-anywhere.herokuapp.com/http://data.orghunter.com/v1/charitybasic?user_key=1b7a21f75daf42af87666ef713510b26&zipCode=97060", 
            dataType: "json", // the data received
            success: logResults
        });
    }
    /*
    $('#table').DataTable( {
        "ajax": $.getJSON("https://data.orghunter.com/v1/charitysearch?user_key=1b7a21f75daf42af87666ef713510b26&searchTerm=treasure%20coast%20humane?callback=?",function(json){
  console.log(json);
}),
        "columns": [
            { "data": "data.charityName" },
            { "data": "data.missionStatement" },
            { "data": "data.state" },
            { "data": "data.city" },
            { "data": "data.website" }
        ]
    } );*/
    $(document).ready(loadResults);
    </script>

</head>

<body>
    <div class = "jumbotron text-center">
        <h1>Charity Search</h1>
    </div>

    <table id="table" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Name</th>
                <th>Mission</th>
                <th>State</th>
                <th>City</th>
                <th>Website</th>
            </tr>
        </thead>
        <tbody>
            <tr id = "results">

            </tr>

        </tbody>
        <tfoot>
            <tr>
                <th>Name</th>
                <th>Mission</th>
                <th>State</th>
                <th>City</th>
                <th>Website</th>
            </tr>
        </tfoot>
    </table>
</html>
</body>
